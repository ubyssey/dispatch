
<script src="https://code.jquery.com/jquery-2.1.4.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="https://s3-us-west-1.amazonaws.com/ubyssey/static/css/jquery.datetimepicker.min.css" />
<script type="text/javascript" src="https://s3-us-west-1.amazonaws.com/ubyssey/static/js/jquery.datetimepicker.full.min.js"></script>

{{ form.non_field_errors }}
<form method="post" enctype="multipart/form-data">
  {% csrf_token %}

  <div class="fieldWrapper">
    {{ form.title.errors }}
    <label for="{{ form.title.id_for_label }}">Title of Event:</label>
    {{ form.title }}
  </div>

  <div class="fieldWrapper">
    {{ form.description.errors }}
    <label for="{{ form.description.id_for_label }}">Description:</label>
    {{ form.description }}
  </div>

  <div class="fieldWrapper">
    {{ form.host.errors }}
    <label for="{{ form.host.id_for_label }}">Host:</label>
    {{ form.host }}
  </div>

  {% if form.facebook_image_url.value %}
  <div class="fieldWrapper">

    {{ form.facebook_image_url.errors }}

    <label for="{{ form.facebook_image_url.id_for_label }}">Image for the Event:</label>

    <img id="previewImage" src="{{ form.facebook_image_url.value }}" style="-webkit-user-select: none; display: block; margin: auto; cursor: zoom-in;" >

    {{ form.image.errors }}
    <label for="{{ form.image.id_for_label }}">Or choose your own image:</label>
    <input id="imgInp" type='file' onchange="readUrl(this);" name="image"/>

    <input id="reset" type=reset onclick="
    document.getElementById('previewImage').src='{{ form.facebook_image_url.value }}';
    document.getElementById('reset').style.display = 'none';"
    value="Or stick with the facebook image" />

  </div>

  {% else %}
  <div class="fieldWrapper">
    {{ form.image.errors }}
    <label for="{{ form.image.id_for_label }}">Image for the Event:</label>
    <input id="imgInp" type='file' onchange="readUrl(this);" name="image"/>
    <img id="previewImage" src="#" alt="User uploaded image"/>
  </div>
  {% endif %}

  <div class="fieldWrapper">
    {{ form.start_time.errors }}
    <label for="{{ form.start_time.id_for_label }}">Start Time:</label>
    {{ form.start_time }}
  </div>

  <div class="fieldWrapper">
    {{ form.end_time.errors }}
    <label for="{{ form.end_time.id_for_label }}">End Time:</label>
    {{ form.end_time }}
  </div>

  <div class="fieldWrapper">
    {{ form.location.errors }}
    <label for="{{ form.location.id_for_label }}">Location:</label>
    {{ form.location }}
  </div>

  <div class="fieldWrapper">
    {{ form.address.errors }}
    <label for="{{ form.address.id_for_label }}">Address:</label>
    {{ form.address }}
  </div>

  <div class="fieldWrapper">
    {{ form.category.errors }}
    <label for="{{ form.category.id_for_label }}">Category of Event:</label>
    {{ form.category }}
  </div>

  <p>Please add in your email and phone number! It will allow us to contact you in case we need to confirm any information.</p>

  <div class="fieldWrapper">
    {{ form.submitter_email.errors }}
    <label for="{{ form.submitter_email.id_for_label }}">Email: </label>
    {{ form.submitter_email }}
  </div>

  <div class="fieldWrapper">
    {{ form.submitter_phone.errors }}
    <label for="{{ form.submitter_phone.id_for_label }}">Phone Number: </label>
    {{ form.submitter_phone }}
  </div>

  <!-- These are to pass the facebook_url and facebook_image_url on to the form. If you know a better way, please change! -->
  <p hidden>{{ form.facebook_url }}</p>
  <p hidden>{{ form.facebook_image_url }}</p>

  <input type="submit" name="submit_event" value="Submit" />
</form>

<form method="post">
  {% csrf_token %}

  <label for="facebook_url">Facebook Url:</label>
  <input id="facebook_url" type="text" name="facebook_url"/>

  <input type="submit" name="submit_facebook" value="Submit" />
</form>


<script type="text/javascript">

  jQuery('#id_start_time').datetimepicker({
    minDate:new Date(),
    format:'Y-m-d H:i',
    formatTime:'H:i',
    formatDate:'Y-m-d'
  });

  jQuery('#id_end_time').datetimepicker({
    minDate:new Date(),
    format:'Y-m-d H:i',
    formatTime:'H:i',
    formatDate:'Y-m-d'
  });

</script>

<script type="text/javascript">

  function readURL(input) {
    if (input.files && input.files[0]) {

      var reader = new FileReader();
      reader.onload = function(e) {
        $('#previewImage').attr('src', e.target.result);
      }

      reader.readAsDataURL(input.files[0]);
    }

    var x = document.getElementById('reset');
    x.style.display = 'inline';

  }

  $("#imgInp").change(function() {
    readURL(this);
  });


  function hideReset() {
    document.getElementById("reset").style.display = "none";
  }

  window.onload = hideReset

</script>
